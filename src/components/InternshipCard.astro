---
import { Image } from 'astro:assets';

export interface Props {
  internship: {
    company: string;
    title: string;
    date: string;
    graphic: string;
    description: string;
  };
  direction?: 'left' | 'right';
}

const { internship, direction = 'left' } = Astro.props;
const { company, title, date, graphic, description } = internship;

const isGraphicLeft = direction === 'left';
---

<section class="grid grid-cols-1 md:grid-cols-2 items-center gap-8 md:gap-12">
  <!-- Graphic Column -->
  <div class:list={["w-full", { 'md:order-last': !isGraphicLeft }]}>
    {graphic && (
      <>
        {typeof graphic === 'string' && graphic.endsWith('.mp4') ? (
          <video src={graphic} autoplay loop muted playsinline class="w-full h-auto rounded-xl shadow-lg"></video>
        ) : typeof graphic === 'string' && graphic.endsWith('.gif') ? (
          <img src={graphic} alt={company} class="w-full h-auto rounded-xl shadow-lg" />
        ) : (
          <Image src={graphic} alt={company} width={1200} height={800} class="w-full h-auto rounded-xl shadow-lg" />
        )}
      </>
    )}
  </div>

  <!-- Content Column -->
  <div class:list={["py-6 md:py-0", { 'md:order-first': !isGraphicLeft }]}>
    <div class:list={["max-w-lg", { 'md:mr-auto': isGraphicLeft, 'md:ml-auto': !isGraphicLeft }]}>
      <p class="text-sm text-slate-400 mb-2">{date}</p>
      <h3 class="text-3xl font-bold text-slate-100 mb-3">{company}</h3>
      <h4 class="text-xl font-semibold text-primary mb-4">{title}</h4>
      <p class="text-slate-300 leading-relaxed">{description}</p>
    </div>
  </div>
</section>
